import { EXERCISE_IDS } from "../constants/exercises";

export const frontmatter = {
  id: "14-02-recursion-practice",
  title: "14-2. 円のフラクタル",
  category: "challenge",
  exercises: [
    {
      id: EXERCISE_IDS.RECURSION_PRACTICE,
      label: "コードを書いてみる →",
      initialCode: `function setup() {
  createCanvas(400, 400);
  background(255, 255, 255);
  circles(200, 200, 80, 3);
}

function circles(x, y, r, n) {
  ellipse(x, y, r * 2, r * 2);

  if (n < 1) {
    return;
  }

  let dr = r / 2;

  // 右側に小さい円を描く
  circles(x + dr, y, dr, n - 1);

  // 左側に小さい円を描く
  circles(x - dr, y, dr, n - 1);
}`
    }
  ]
};

## 円のフラクタル

再帰関数を使って、円のフラクタル図形を描いてみましょう。

### コードの説明

```javascript
function circles(x, y, r, n) {
  ellipse(x, y, r * 2, r * 2);  // 1. 円を描く

  if (n < 1) {
    return;  // 2. 終了条件
  }

  let dr = r / 2;  // 3. 半分の半径

  circles(x + dr, y, dr, n - 1);  // 4. 右側に小さい円
  circles(x - dr, y, dr, n - 1);  // 5. 左側に小さい円
}
```

### パラメータ

- `x, y`: 円の中心座標
- `r`: 円の半径
- `n`: 残りの再帰回数

### 実行の流れ

`circles(200, 200, 80, 3)` を呼ぶと：

1. 中央に大きい円（r=80）
2. 右に中くらいの円（r=40, n=2）
   - さらに右に小さい円（r=20, n=1）
     - さらに右に超小さい円（r=10, n=0）→終了
     - さらに左に超小さい円（r=10, n=0）→終了
   - さらに左に小さい円（r=20, n=1）
     - ...
3. 左に中くらいの円（r=40, n=2）
   - ...

### ポイント

- n が大きいほど、細かい円がたくさん描かれます
- r が半分ずつ小さくなっていきます
- 必ず終了条件 `if (n < 1) return;` が必要です

## 試してみましょう

右のエディタを実行して、フラクタル図形を確認してみましょう。n の値を変えると、どう変わるか試してみるといいですね。
